"use strict";(globalThis.webpackChunknotes=globalThis.webpackChunknotes||[]).push([[1426],{9309(e,t,i){i.r(t),i.d(t,{default:()=>x});var n=i(6540),l=i(1656),o=i(6884),r=i(8989),a=i(9853),s=i(5260),d=i(6025),c=i(4848);const p=[{id:1,name:"\u5956\u54c1 1",color:"#FF6B6B",imgPath:"/gift/gift1.png"},{id:2,name:"\u5956\u54c1 2",color:"#FF8E99",imgPath:"/gift/gift2.png"},{id:3,name:"\u5956\u54c1 3",color:"#FF92AE",imgPath:"/gift/gift3.png"},{id:4,name:"\u5956\u54c1 4",color:"#FFB3BA",imgPath:"/gift/gift4.png"},{id:5,name:"\u5956\u54c1 5",color:"#FF6B6B",imgPath:"/gift/gift5.png"},{id:6,name:"\u5956\u54c1 6",color:"#FF8E99",imgPath:"/gift/gift6.png"},{id:7,name:"\u5956\u54c1 7",color:"#FF92AE",imgPath:"/gift/gift7.png"},{id:8,name:"\u5956\u54c1 8",color:"#FFB3BA",imgPath:"/gift/gift8.png"}];function x(){const e=(0,n.useRef)(),t=(0,d.Ay)("/"),i=p.map(e=>{return{...e,fullImg:(i=e.imgPath,`${t.endsWith("/")?t.slice(0,-1):t}${i.startsWith("/")?i:`/${i}`}`)};var i}),[x,h]=(0,n.useState)("pass1"),[m,f]=(0,n.useState)("pass1"),[u,y]=(0,n.useState)(""),[b,j]=(0,n.useState)([]),[v,w]=(0,n.useState)([]),[F,S]=(0,n.useState)([]),[C,k]=(0,n.useState)(null),[B,z]=(0,n.useState)(!1),[T,I]=(0,n.useState)(!1),[P,A]=(0,n.useState)("");(0,n.useEffect)(()=>{const e=(new Date).toDateString(),t=btoa([navigator.userAgent,screen.width,e].join("|")).substring(0,16);A(t),localStorage.getItem(`draw_daily_${t}`)&&I(!0)},[]);const W=({title:e,content:t,onConfirm:i,onCancel:n,confirmText:l="\u786e\u5b9a",cancelText:o="\u8fd4\u56de\u4fee\u6539",icon:r="\ud83c\udf81"})=>(0,c.jsx)(a.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:g.modalOverlay,children:(0,c.jsxs)(a.P.div,{initial:{scale:.9},animate:{scale:1},style:g.modalContent,children:[(0,c.jsx)("div",{style:{fontSize:"44px",marginBottom:"10px"},children:r}),(0,c.jsx)("h2",{style:g.modalTitle,children:e}),t,(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"25px"},children:[(0,c.jsx)("button",{onClick:i,style:g.btnGradient,children:l}),n&&(0,c.jsx)("button",{onClick:n,style:g.btnSecondary,children:o})]})]})});return(0,c.jsxs)(l.A,{title:"\u5e78\u8fd0\u62bd\u5956",noFooter:!0,children:[(0,c.jsx)(s.A,{children:(0,c.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"})}),(0,c.jsxs)("div",{style:g.container,children:[(0,c.jsx)("div",{style:g.bgGlow}),(0,c.jsxs)(r.N,{mode:"wait",children:[("pass1"===x||"pass2"===x)&&(0,c.jsx)(a.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:g.modalOverlay,children:(0,c.jsxs)(a.P.div,{initial:{scale:.9},animate:{scale:1},style:g.modalContent,children:[(0,c.jsx)("div",{style:{fontSize:"44px"},children:"pass1"===x?"\ud83d\udd10":"\ud83d\udd11"}),(0,c.jsx)("h2",{style:g.modalTitle,children:"pass1"===x?"\u9a8c\u8bc1\u7801 1":"\u9a8c\u8bc1\u7801 2"}),(0,c.jsx)("input",{type:"text",inputMode:"numeric",value:u,onChange:e=>y(e.target.value),style:g.input,placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"}),(0,c.jsx)("button",{onClick:()=>{"pass1"===x?"1"===u?(h("exclude"),y("")):(f("pass1"),h("error")):"pass2"===x&&("2"===u?(h("focus"),y("")):(f("pass2"),h("error")))},style:g.btnGradient,children:"\u786e\u8ba4\u8fdb\u5165"})]})},x),"error"===x&&(0,c.jsx)(W,{title:"\u9a8c\u8bc1\u5931\u8d25",icon:"\u274c",content:(0,c.jsx)("div",{style:g.modalSubTitle,children:"pass1"===m?"\u9a8c\u8bc1\u7801 1 \u9519\u8bef":"\u9a8c\u8bc1\u7801 2 \u9519\u8bef"}),onConfirm:()=>{h(m),y("")},confirmText:"\u91cd\u65b0\u8f93\u5165"},"error"),("exclude"===x||"focus"===x)&&(0,c.jsx)(a.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:g.modalOverlay,children:(0,c.jsxs)(a.P.div,{initial:{scale:.9},animate:{scale:1},style:g.modalContent,children:[(0,c.jsx)("h2",{style:g.modalTitle,children:"exclude"===x?"\u6392\u9664\u5956\u54c1":"\u6838\u5fc3\u613f\u671b"}),(0,c.jsx)("div",{style:g.prizeGrid,children:("exclude"===x?i:i.filter(e=>!b.includes(e.id))).map(e=>{const t="exclude"===x?b.includes(e.id):v.includes(e.id);return(0,c.jsxs)("div",{onClick:()=>{return t=e.id,n="exclude"===x?j:w,l=2,void((i="exclude"===x?b:v).includes(t)?n(i.filter(e=>e!==t)):i.length<l&&n([...i,t]));var t,i,n,l},style:{...g.prizeItem,borderColor:t?"#FF6B6B":"#f0f0f0",background:t?"rgba(255,107,107,0.05)":"#fff"},children:[(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,c.jsx)("img",{src:e.fullImg,alt:e.name,style:g.prizeThumbnail}),(0,c.jsx)("span",{style:{color:"#333",fontWeight:t?"bold":"normal"},children:e.name})]}),(0,c.jsx)("div",{style:{...g.checkbox,background:t?"#FF6B6B":"transparent",borderColor:t?"#FF6B6B":"#ddd"}})]},e.id)})}),(0,c.jsx)("button",{onClick:()=>h("exclude"===x?"confirm_exclude":"confirm_focus"),disabled:2!==("exclude"===x?b.length:v.length),style:{...g.btnGradient,opacity:2===("exclude"===x?b.length:v.length)?1:.4},children:"\u4e0b\u4e00\u6b65"})]})},x),"confirm_exclude"===x&&(0,c.jsx)(W,{title:"\u786e\u5b9a\u6392\u9664\u5417\uff1f",content:(0,c.jsx)("div",{style:g.prizeGrid,children:i.filter(e=>b.includes(e.id)).map(e=>(0,c.jsx)("div",{style:g.prizeItem,children:(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,c.jsx)("img",{src:e.fullImg,style:g.prizeThumbnail}),e.name]})},e.id))}),onConfirm:()=>h("pass2"),onCancel:()=>h("exclude")},"ce"),"confirm_focus"===x&&(0,c.jsx)(W,{title:"\u786e\u5b9a\u613f\u671b\u5417\uff1f",icon:"\u2728",content:(0,c.jsx)("div",{style:g.prizeGrid,children:i.filter(e=>v.includes(e.id)).map(e=>(0,c.jsx)("div",{style:g.prizeItem,children:(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,c.jsx)("img",{src:e.fullImg,style:g.prizeThumbnail}),e.name]})},e.id))}),onConfirm:()=>{const e=i.filter(e=>!b.includes(e.id));S(e.map(e=>({...e,weight:v.includes(e.id)?30:10}))),h("wheel")},onCancel:()=>h("focus")},"cf"),"result"===x&&(0,c.jsx)(W,{title:"\ud83c\udf89 \u606d\u559c\u4e2d\u5956",icon:"\ud83c\udf08",content:(0,c.jsxs)("div",{style:{textAlign:"center"},children:[(0,c.jsx)("img",{src:C?.fullImg,style:{width:"100px",height:"100px",objectFit:"contain"}}),(0,c.jsx)("p",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"10px"},children:C?.name})]}),onConfirm:()=>h("wheel")},"res")]}),"wheel"===x&&(0,c.jsxs)("div",{style:{textAlign:"center"},children:[(0,c.jsx)("h1",{style:g.title,children:"LUCKY WHEEL"}),(0,c.jsx)("div",{style:g.wheelWrapper,children:(0,c.jsx)(o.W1,{ref:e,width:"310px",height:"310px",prizes:F.map(e=>({background:e.color,fonts:[{text:e.name,top:"10%",color:"#fff",fontSize:"12px"}],imgs:[{src:e.fullImg,width:"45%",height:"45%",top:"35%"}]})),buttons:[{radius:"35%",background:"#fff",fonts:[{text:"GO",color:"#FF6B6B",top:"-10px"}]}],onStart:()=>{T?h("warning"):B||(e.current.play(),setTimeout(()=>{const t=F.reduce((e,t)=>e+t.weight,0);let i=Math.random()*t;for(let n=0;n<F.length;n++)if(i-=F[n].weight,i<=0){e.current.stop(n);break}},2500))},onEnd:async e=>{const t=F.find(t=>t.name===e.fonts[0].text);k(t),z(!0),await(async e=>{try{await fetch("https://formspree.io/f/xqeqbogb",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,uid:P,time:(new Date).toLocaleString()})})}catch(t){console.error("\u63d0\u4ea4\u5931\u8d25",t)}})({type:"\u6700\u7ec8\u4e2d\u5956",prize:t.name}),localStorage.setItem(`draw_daily_${P}`,"true"),I(!0),h("result"),z(!1)}})})]})]})]})}const g={container:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",background:"#fff"},bgGlow:{position:"absolute",width:"100%",height:"100%",background:"radial-gradient(circle at 50% 10%, rgba(255,107,107,0.08) 0%, transparent 60%)"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.96)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(10px)"},modalContent:{background:"#fff",padding:"30px",borderRadius:"30px",width:"90%",maxWidth:"380px",boxShadow:"0 20px 50px rgba(0,0,0,0.1)",textAlign:"center"},modalTitle:{fontSize:"24px",fontWeight:"900",marginBottom:"15px"},modalSubTitle:{color:"#666",fontSize:"14px"},input:{width:"100%",padding:"15px",borderRadius:"15px",border:"1px solid #eee",marginBottom:"20px",textAlign:"center"},btnGradient:{width:"100%",padding:"15px",borderRadius:"15px",border:"none",background:"linear-gradient(135deg, #FF6B6B, #FF8E99)",color:"#fff",fontWeight:"bold",cursor:"pointer"},btnSecondary:{width:"100%",padding:"12px",borderRadius:"15px",border:"1px solid #ddd",background:"transparent",marginTop:"10px",cursor:"pointer"},prizeGrid:{display:"flex",flexDirection:"column",gap:"10px",maxHeight:"300px",overflowY:"auto",padding:"5px"},prizeItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",borderRadius:"15px",border:"1px solid #f0f0f0"},prizeThumbnail:{width:"35px",height:"35px",marginRight:"10px",objectFit:"contain"},checkbox:{width:"18px",height:"18px",borderRadius:"50%",border:"2px solid #ddd"},title:{fontSize:"28px",fontWeight:"900",color:"#FF6B6B",marginBottom:"30px"},wheelWrapper:{padding:"10px",background:"#fff",borderRadius:"50%",boxShadow:"0 10px 30px rgba(0,0,0,0.05)"}}}}]);